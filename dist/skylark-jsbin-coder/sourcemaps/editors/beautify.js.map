{"version":3,"sources":["editors/beautify.js"],"names":["define","$","jsbin","coder","settings","customKeys","keys","embed","disabled","ctrlKey","browser","platform","document","on","e","shiftKey","which","beautify","editors","focusedPanel","panels","focused","beautifyUrls","html","css","js","state","processors","id","window","html_beautify","beautifyHTML","lazyLoadAndRun","css_beautify","beautifyCSS","js_beautify","beautifyJS","url","callback","getScript","done","runBeautifier","panel","beautifier","editor","setCode","getCode","indent_size","indentUnit"],"mappings":";;;;;;;AAAAA,QACE,iBACC,WACA,YACD,SAAUC,EAAEC,EAAMC,GAClB,aAGA,IAAIC,EAAWF,EAAME,aACjBC,EAAaD,EAASE,SAE1B,IAAIJ,EAAMK,QAASF,EAAWG,SAA9B,CAyDA,IAAIC,EAAiC,QAAvBR,EAAES,QAAQC,SAAqB,UAAY,UASzD,OAPAV,EAAEW,UAAUC,GAAG,UAAW,SAA4BC,GAChDA,EAAEL,IAAYK,EAAEC,UAAuB,IAAXD,EAAEE,OAEhCC,MAIGd,EAAMe,QAAQD,SAAYA,EA9DjC,SAASA,IAEP,IAAIE,EAAejB,EAAMkB,OAAOC,QAC5BC,GACFC,KAAMrB,EAAc,OAAI,uCACxBsB,IAAKtB,EAAc,OAAI,sCACvBuB,GAAIvB,EAAc,OAAI,mCAGwB,SAA5CA,EAAMwB,MAAMC,WAAWR,EAAaS,IACjCC,OAAOC,cAGVC,IAFAC,EAAeV,EAAaC,KAAMQ,GAIiB,QAA5C7B,EAAMwB,MAAMC,WAAWR,EAAaS,IACxCC,OAAOI,aAGVC,IAFAF,EAAeV,EAAaE,IAAKU,GAIkB,eAA5ChC,EAAMwB,MAAMC,WAAWR,EAAaS,MACxCC,OAAOM,YAGVC,IAFAJ,EAAeV,EAAaG,GAAIW,IAQtC,SAASJ,EAAeK,EAAKC,GAC3BrC,EAAEsC,UAAUF,GAAKG,KAAKF,GAGxB,SAASP,IACPU,EAAcvC,EAAMkB,OAAOC,QAASQ,OAAOC,eAG7C,SAASI,IACPO,EAAcvC,EAAMkB,OAAOC,QAASQ,OAAOI,cAG7C,SAASG,IACPK,EAAcvC,EAAMkB,OAAOC,QAASQ,OAAOM,aAG7C,SAASM,EAAcC,EAAOC,GAC5BD,EAAME,OAAOC,QAAQF,EAAWD,EAAME,OAAOE,WAC3CC,YAAa3C,EAASwC,QAASxC,EAASwC,OAAOI,YAAkB","file":"../../editors/beautify.js","sourcesContent":["define([\r\n  \"skylark-jquery\",\r\n   \"../jsbin\",\r\n   \"../coder\"\r\n],function ($,jsbin,coder) {\r\n  'use strict';\r\n  /*globals $, jsbin, objectValue */\r\n\r\n  var settings = jsbin.settings || {};\r\n  var customKeys = settings.keys || {};\r\n\r\n  if (jsbin.embed || customKeys.disabled) {\r\n    return;\r\n  }\r\n\r\n  function beautify() {\r\n\r\n    var focusedPanel = jsbin.panels.focused;\r\n    var beautifyUrls = {\r\n      html: jsbin['static'] + '/js/vendor/beautify/beautify-html.js',\r\n      css: jsbin['static'] + '/js/vendor/beautify/beautify-css.js',\r\n      js: jsbin['static'] + '/js/vendor/beautify/beautify.js'\r\n    };\r\n\r\n    if (jsbin.state.processors[focusedPanel.id] === 'html') {\r\n      if (!window.html_beautify) {\r\n        lazyLoadAndRun(beautifyUrls.html, beautifyHTML);\r\n      } else {\r\n        beautifyHTML();\r\n      }\r\n    } else if (jsbin.state.processors[focusedPanel.id] === 'css') {\r\n      if (!window.css_beautify) {\r\n        lazyLoadAndRun(beautifyUrls.css, beautifyCSS);\r\n      } else {\r\n        beautifyCSS();\r\n      }\r\n    } else if (jsbin.state.processors[focusedPanel.id] === 'javascript') {\r\n      if (!window.js_beautify) {\r\n        lazyLoadAndRun(beautifyUrls.js, beautifyJS);\r\n      } else {\r\n        beautifyJS();\r\n      }\r\n    }\r\n\r\n  }\r\n\r\n  function lazyLoadAndRun(url, callback) {\r\n    $.getScript(url).done(callback);\r\n  }\r\n\r\n  function beautifyHTML() {\r\n    runBeautifier(jsbin.panels.focused, window.html_beautify);\r\n  }\r\n\r\n  function beautifyCSS() {\r\n    runBeautifier(jsbin.panels.focused, window.css_beautify);\r\n  }\r\n\r\n  function beautifyJS() {\r\n    runBeautifier(jsbin.panels.focused, window.js_beautify);\r\n  }\r\n\r\n  function runBeautifier(panel, beautifier) {\r\n    panel.editor.setCode(beautifier(panel.editor.getCode(), {\r\n      indent_size: settings.editor ? settings.editor.indentUnit || 2 : 2\r\n    }));\r\n  }\r\n\r\n  var ctrlKey = $.browser.platform === 'mac' ? 'metaKey' : 'ctrlKey'\r\n\r\n  $(document).on('keydown', function beautifyKeyBinding(e) {\r\n    if (e[ctrlKey] && e.shiftKey && e.which == 76) {\r\n      // ctrl/command + shift + L\r\n      beautify();\r\n    }\r\n  });\r\n\r\n  return coder.editors.beautify =  beautify;\r\n\r\n});\r\n"]}