{"version":3,"sources":["updateTitle.js"],"names":["define","$","jsbin","updateTitle","source","undefined","panels","html","getCode","newDocTitle","match","re","documentTitle","lastState","state","latest","trim","text","document","title","revision","coder"],"mappings":";;;;;;;AAAAA,QACE,iBACC,WACD,SAAUC,EAAEC,GACZ,SAASC,EAAYC,GACnB,kBAEeC,IAAXD,IACFA,EAASF,EAAMI,OAAOA,OAAOC,KAAKC,WAGpC,IAAIC,EAAcL,EAAOM,MAAMP,EAAYQ,IACvB,OAAhBF,GAAwBA,EAAY,KAAOG,gBAC7CT,EAAYU,UAAYX,EAAMY,MAAMC,OACpCH,cAAgBX,EAAE,SAASM,KAAKE,EAAY,GAAGO,QAAQC,OACnDL,cACFM,SAASC,MAAQP,cAAgB,YAIjCM,SAASC,MAAQ,UAIdjB,EAAMY,MAAMC,QAAUb,EAAMY,MAAMM,WACrCF,SAASC,MAAQ,KAAOjB,EAAMY,MAAMM,SAAW,KAAOF,SAASC,QAYrE,OAHAhB,EAAYQ,GAAK,wBACjBR,EAAYU,UAAY,KAEjBX,EAAMmB,MAAMlB,YAAcA","file":"../updateTitle.js","sourcesContent":["define([\r\n  \"skylark-jquery\",\r\n   \"./jsbin\"\r\n],function ($,jsbin) {\r\n  function updateTitle(source) {\r\n    'use strict';\r\n    /*globals jsbin, documentTitle, $*/\r\n    if (source === undefined) {\r\n      source = jsbin.panels.panels.html.getCode();\r\n    }\r\n    // read the element out of the source code and plug it in to our document.title\r\n    var newDocTitle = source.match(updateTitle.re);\r\n    if (newDocTitle !== null && newDocTitle[1] !== documentTitle) {\r\n      updateTitle.lastState = jsbin.state.latest;\r\n      documentTitle = $('<div>').html(newDocTitle[1].trim()).text(); // jshint ignore:line\r\n      if (documentTitle) {\r\n        document.title = documentTitle + ' - ' + 'JS Bin';\r\n\r\n        // add the snapshot if not the latest\r\n      } else {\r\n        document.title = 'JS Bin';\r\n      }\r\n\r\n\r\n      if (!jsbin.state.latest && jsbin.state.revision) {\r\n        document.title = '(#' + jsbin.state.revision + ') ' + document.title;\r\n      }\r\n    }\r\n\r\n    // there's an edge case here if newDocTitle === null, it won't update to show\r\n    // the snapshot, but frankly, it's an edge case that people won't notice.\r\n\r\n  }\r\n\r\n  updateTitle.re = /<title>(.*)<\\/title>/i;\r\n  updateTitle.lastState = null;\r\n\r\n  return jsbin.coder.updateTitle = updateTitle;\r\n});"]}