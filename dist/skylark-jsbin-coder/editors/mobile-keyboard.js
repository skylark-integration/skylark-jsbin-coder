/**
 * skylark-jsbin-coder - A version of jsbin-editor  that ported to running on skylarkjs.
 * @author Hudaokeji, Inc.
 * @version v0.9.0
 * @link https://github.com/skylark-integration/skylark-jsbin-coder/
 * @license MIT
 */
define(["skylark-jquery","../jsbin","./mobile-command-maps","./panels"],function(e,a,o,t){if(a.mobile&&!a.embed){var n={next:function(){},close:function(e){var a,o=t.focused.editor.textarea,n=(a=o).selectionStart?a.selectionStart:a.createTextRange?a.createTextRange().startOffset:void 0,r=o.value.substring(0,n).lastIndexOf(e);if(">"===e){for(var s=0;s>-1;){s=o.value.substring(0,r).lastIndexOf("<")+1;var i=o.value.substr(s,1);if("/"!==i){if("!"===i)return"";if(0===s)return"";break}var l=o.value.substr(s+1,o.value.substr(s).indexOf(">")-1);r=o.value.lastIndexOf("<"+l)}var c=o.value.substr(s,r).indexOf(e);return"</"+o.value.substr(s,c)+">$0"}},complete:function(){var e=t.focused;"html"===e.id||"css"===e.id?CodeMirror.commands["emmet.expand_abbreviation_with_tab"].call(null,e.editor):e.editor._hasCompletions&&e.editor._hasCompletions()?e.editor._showCompletion():CodeMirror.commands.autocomplete(e.editor),e.editor.focus()}},r={html:e(),css:e(),js:e(),console:e(),all:e()},s=e('<div id="strip"><div class="inner-strip"></div></div>');o.map(function(a){var o=e("<button>"),i=a.value,l=a.value.replace(/\$0/,"");a.callback||(a.callback=function(){return i}),o.on("click",function(){var e=t.focused;if(e.editor){var o=e.editor.getCursor(),r=a.callback.call(n);if(null==r)return;var s=r.indexOf("$0");-1===s&&(s=0);var i=e.editor.cursorPosition().character+s;-1!==o&&(r=r.replace("$0","")),e.editor.replaceRange(r,o,o),e.editor.setCursor(i),e.editor.textarea.focus()}else"console"===e.id&&(e.setCursorTo(a.callback().replace("$0",""),!0),e.$el.click())}),o.html(escapeHTML(l)),s.find("div").append(o),a.panel&&("string"==typeof a.panel?r[a.panel]=r[a.panel].add(o):a.panel.forEach(function(e){r[e]=r[e].add(o)}),r.all=r.all.add(o))}),e("body").append(s);var i=function(e){return function(){r.all.hide(),r[e]&&r[e].show()}};$document.on("jsbinReady",function(){t.named.html.on("show",i("html")),t.named.css.on("show",i("css")),t.named.javascript.on("show",i("js")),t.named.console.on("show",i("console")),i("javascript"===t.focused.id?"js":t.focused.id)()})}});
//# sourceMappingURL=../sourcemaps/editors/mobile-keyboard.js.map
