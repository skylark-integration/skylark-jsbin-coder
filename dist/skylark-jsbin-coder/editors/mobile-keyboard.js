/**
 * skylark-jsbin-coder - A version of jsbin-editor  that ported to running on skylarkjs.
 * @author Hudaokeji, Inc.
 * @version v0.9.0
 * @link https://github.com/skylark-integration/skylark-jsbin-coder/
 * @license MIT
 */
define(["skylark-jquery","../jsbin","./mobile-command-maps","./panels"],function(e,a,n,o){if(a.mobile&&!a.embed){var t={next:function(){},close:function(e){var n,o=a.panels.focused.editor.textarea,t=(n=o).selectionStart?n.selectionStart:n.createTextRange?n.createTextRange().startOffset:void 0,r=o.value.substring(0,t).lastIndexOf(e);if(">"===e){for(var s=0;s>-1;){s=o.value.substring(0,r).lastIndexOf("<")+1;var i=o.value.substr(s,1);if("/"!==i){if("!"===i)return"";if(0===s)return"";break}var l=o.value.substr(s+1,o.value.substr(s).indexOf(">")-1);r=o.value.lastIndexOf("<"+l)}var c=o.value.substr(s,r).indexOf(e);return"</"+o.value.substr(s,c)+">$0"}},complete:function(){var e=a.panels.focused;"html"===e.id||"css"===e.id?CodeMirror.commands["emmet.expand_abbreviation_with_tab"].call(null,e.editor):e.editor._hasCompletions&&e.editor._hasCompletions()?e.editor._showCompletion():CodeMirror.commands.autocomplete(e.editor),e.editor.focus()}},r={html:e(),css:e(),js:e(),console:e(),all:e()},s=e('<div id="strip"><div class="inner-strip"></div></div>');n.map(function(n){var o=e("<button>"),i=n.value,l=n.value.replace(/\$0/,"");n.callback||(n.callback=function(){return i}),o.on("click",function(){var e=a.panels.focused;if(e.editor){var o=e.editor.getCursor(),r=n.callback.call(t);if(null==r)return;var s=r.indexOf("$0");-1===s&&(s=0);var i=e.editor.cursorPosition().character+s;-1!==o&&(r=r.replace("$0","")),e.editor.replaceRange(r,o,o),e.editor.setCursor(i),e.editor.textarea.focus()}else"console"===e.id&&(e.setCursorTo(n.callback().replace("$0",""),!0),e.$el.click())}),o.html(escapeHTML(l)),s.find("div").append(o),n.panel&&("string"==typeof n.panel?r[n.panel]=r[n.panel].add(o):n.panel.forEach(function(e){r[e]=r[e].add(o)}),r.all=r.all.add(o))}),e("body").append(s);var i=function(e){return function(){r.all.hide(),r[e]&&r[e].show()}};$document.on("jsbinReady",function(){o.named.html.on("show",i("html")),o.named.css.on("show",i("css")),o.named.javascript.on("show",i("js")),o.named.console.on("show",i("console")),i("javascript"===o.focused.id?"js":o.focused.id)()})}});
//# sourceMappingURL=../sourcemaps/editors/mobile-keyboard.js.map
